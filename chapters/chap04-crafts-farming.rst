######################
It almost makes sense!
######################

Welcome to Part 4 of the Dwarf Fortress Walkthrough. No nancying
around, lets get right back into it! I hope you’ve diligently completed
your homework. If you look below, you’ll see I have…


Extreme Home Makeover: Dwarf Edition!
=====================================

.. image:: images/dftutorial48.png
   :align: center

…Lots of Crafts! I’ve gone through and completed all of the tasks at
the end of chapter 3, and to prove it, here is a picture of my pile of
crafts. Looks like I haven’t made much in the way of bins yet, so the
crafts haven’t been tidily stored in a single bin. Don’t worry, once
bins are produced the dwarfs will sort all this out.

I’ve also got piles everywhere, workshops set up and food and booze
production going. Things are looking good! But we have yet more useful
jobs to do.

Before getting to those though, let's set up a trade depot outside so
merchants can bring us wagons of useful goods.  Place that with
:kbd:`b`, :kbd:`D` outside - wagons need a three tile wide pathway
without traps, so this is the easiest way to keep it accessible.

Next time traders turn up, just remember to check out the tutorial
on :ref:`tutorial-trading` for a guide to the process.

First up, we need to move our booze production downstairs.
I don’t want to dig out any more of our top-floor space just now,
and rock walls can be smoothed and engraved later - which keeps
dwarves happy.  Of course, we have many options for how we
expand the fortress, but we’ll go for simple right now, so lets get
shifting stuff.

Lets get get on with some digging
and our new booze space. Hell, lets move the food downstairs as well
and keep it nice and close to the dining room, where dwarfs are going
to want to eat it.

Here’s how I’ve plotted things out:

.. image:: images/dftutorial49.png
   :align: center

Once that digging is done, set up the big food storage hall as a food
stockpile. Then build a still downstairs using :kbd:`b`, :kbd:`w`,
:kbd:`l`. This should be easy-peasy for you now! Your next job is go to
upstairs and remove the old food stockpile and still.

Look what the cat dragged in!
=============================
At some point you’re going to get immigrants. I got some right now.

    :guilabel:`Some migrants have arrived.`

Soon after the message a stream of new loafers streak into the
fortress. And what’s the first thing they do? Eat and drink!
This has me a little concerned about our food stocks, and if
this has happened to you, I suggest you do what I do and sort out some
more booze and dig some more bedrooms downstairs and assign those new
dwarfs to it.

Outdoor farming for fun and profit
==================================
You know about farming inside, now how about farming outside? As you
may recall we’ve had some plant gathering going on outside. In
temperate climates that means we’re generally gathering berries.
And once we’ve eaten berries, what do we have? Well, if you’re a
dwarf, you end up with seeds. And wouldn’t it be great to
plant them? Yes it would!

We’ll cover looking at our stocks of goods later, by the way, so just
trust me for now.

But berries are going to require being planted outside, as they
love the sun don’t they? Of course, we don’t want to go outside where
it could be nasty and dangerous, so what do we do?. We can’t really
expect strawberries to grow in a dark cave, can we? So how about we
compromise with these fruity demons. We’ll build an outdoor farm, but
we’ll lock it off from the world with a wall and an entrance only
available to us.

To achieve our goals we first need to dig some handy exit to the
outdoors. Perhaps near our existing farm. This is what I did:

.. image:: images/dftutorial53.png
   :align: center

I’ve expanded the farm room a little and set a passage to the outside
to be dug. Once the space is dug you’ll notice that the slope icons
still exist around the exit. This could be a problem. If we built walls
around a nicely enclosed farm now enemies would still be able to get to
it from above, by walking down the slopes! So we need to remove the
slopes. To remove it, we hit :kbd:`d` for :guilabel:`Designations`
and then :kbd:`z` for :guilabel:`Remove Up Stairs/Ramps`.

I’ve selected almost all of the slopes across the front of my fortress.
I don’t want any surprises 'dropping' in anywhere along our front. Here
you can see my miners hard at work  stripping away the outside ramps so
there’s essentially a sharp drop between the level above and this
level.

.. image:: images/dftutorial54.png
   :align: center

While you’re at it, you could tidy up the outside edge of the fortress
with digging and ramp removal. Here’s my much tidier fortress entrance:

.. image:: images/dftutorial55.png
   :align: center

Later on we might incorporate some complex defenses into this area.

.. note::

    Recent versions of Dwarf Fortress added the ability to climb,
    so to be truly secure a wall must smoothed natural stone,
    or built two levels high with an overhand at the top.  Using
    stone blocks also helps.

    That's pretty tricky though, so for now we'll just hope the
    goblins don't bother.

So, lets get on with this farm! We need to surround a nice large area
with walls, right? Keep our dwarfs safe from wandering critters. To
build walls we need to:

* Hit :kbd:`b`
* Hit :kbd:`C`, (that’s :kbd:`Shift`-:kbd:`c`, remember the keys are
  case-sensitive), or scroll through the list and look for
  :guilabel:`Wall/Floor/Stairs/Track` and hit :kbd:`Enter`.
* :guilabel:`Wall` is selected by default, hit :kbd:`Enter`.
* You now have a green X. Like the farm plot you can change the size
  with :kbd:`u`, :kbd:`m`, :kbd:`h` and :kbd:`k`.
* Hit :kbd:`u` until you’ve got a max-height wall.
* Place the wall right next to the entrance, hit :kbd:`Enter` (below you can
  see how I placed mine).
* Select a material using :kbd:`=` and :kbd:`Enter`
* Hit :kbd:`Enter` until the list goes away and you see the wall outline.
  You’re selecting one item for each segment of the wall.
* Hit :kbd:`Esc` until the game resumes.

You will now have a wall under construction! Again, hit :kbd:`q` and move it
down your wall, you’ll see the construction status. Don’t worry, your
dwarfs will get to the wall pretty quickly.

While you’re waiting, clear all the trees and bushes from inside your
soon-to-be farm space using :kbd:`d`, :kbd:`t` to :guilabel:`Chop Down
Trees` and :kbd:`d`, :kbd:`p` to :guilabel:`Gather Plants`.

Once you’ve got this under way, build two lengths of wall across to the
right go down a length and a bit, and back to the cliff face.
Here’s how my outdoor farm plot looks so far:

.. image:: images/dftutorial56.png
   :align: center

Isn't it coming along nicely? Soon we’ll be able to hide
inside and behind our walls and ignore the nasty outside world. Yay!

Once your walls are complete you could easily build two 6×6 farm plots
inside this space. One point though, make sure all those trees are cut
down and plants harvested, otherwise you’re going to end up with a
patchy farm plot. Also, if there are any trees in the way of a wall
being built you won’t be able to place the wall. Get them cleared and
the problem will go away.

Oh, I’ve just noticed. Our farm plots will have holes in them anyway,
there are white blobs on the ground which a farm square won’t be built
on. If you hit :kbd:`k` and move the cursor around you’ll see that those
white spots are limestone. Clearly plants don’t like clinging to rock
so no plot will grow there. Never mind, a holey farm isn’t really a big
problem.

Here’s my private outdoors farm yard with the farm plots built as well:

.. image:: images/dftutorial57.png
   :align: center

There you go! Beautiful! Now, just like farms inside, you need to
specify what the fields will build (:kbd:`q`). On the first, I’ve set
strawberries for every season (don’t forget to cycle through the
seasons using :kbd:`a`, :kbd:`b` :kbd:`c`, :kbd:`d`).
When I tried to select strawberries
on the second field they were red, suggesting to me we won’t have
enough seeds that this isn’t the season for planting those items
So instead, I
selected some other random plant. Not sure we’ve got seeds for those,
but we’ll find out all about that later! And later on you can come back
and fix up some better planting instructions. Oh, don’t select
:guilabel:`Seas Fert` or :guilabel:`Fertilize`.
We don’t have any fertilizer yet.

While I remember things, lets take a moment to build a wall along the
top edge above our outside farm. We don’t want any goblins walking up
to the edge of the cliff, looking down, and shooting up our farmers
with their crossbows! So go up a level, using good-old :kbd:`<` and
plan out your wall. Here I’ve built a wall (after stripping trees,
which should once and for all block off any possible approach to my farm.

.. image:: images/dftutorial58.png
   :align: center

But what’s this, we have a problem! Can you spot what it is? Yup, our
stupid dwarf has gone and got himself stuck on the wrong side of the
wall. He can’t get out! Now, we could use the :kbd:`b`, :kbd:`C` menu to
construct some up stairs to him (and then down stairs to connect from
this level down to the upstairs), but how about I show you a handy trick…

You see, dwarfs getting stuck will happen to you a lot unless you take
countermeasure. Here’s how you fix our current problem, and how prevent
it from happening again:

* Hit :kbd:`d`
* Hit :kbd:`n` for :guilabel:`Remove Building`.
* Select a single wall space and hit :kbd:`Enter`.
* Once the wall space is removed you’ll have a gap. On the inside of
  the wall gap (where we don’t want our dwarf to stand), set a wall to be
  built that completely covers the gap.
* Resume the game and then immediately pause it.
* Hit :kbd:`q` and move down each piece of your fake-wall and hit :kbd:`s` to
  :guilabel:`Suspend Construction` of each segment. Dwarfs don’t like standing
  where buildings are due to be placed, so this means when our dwarf
  comes back to fill in the gap he won’t lock himself in again.

Here’s how my gap and 'fake' wall look. You can see my X over a fake
wall segment, and on the right, the wall segment is suspended:

.. image:: images/dftutorial59.png
   :align: center

You can now build a single wall space to close the gap and our dwarf
won’t get trapped. Once you’ve done that, go back over each wall space
with :kbd:`q` and hit :kbd:`x` to remove the suspended wall spaces. Look here,
job done! Dwarfs safe!

.. image:: images/dftutorial60.png
   :align: center

And when I go down and look at my fresh outside farm plot, something is
being planted! Great!

I'll see you next time in, to look at expanding our industries to something
truly impressive!

